<tool id="rp2paths" name="RP2paths" version="1.4.1">
  <description>Enumerate and seperate the different pathways generated by RetroPath2.0</description>
  <requirements>
    <requirement type="package" version="1.4.1">rp2paths</requirement>
  </requirements>
	<stdio>
    <regex match="TIMEOUT:" level="error" />
    <regex match="ERROR:"   level="error" />
		<regex match="WARNING:" level="warning" />
	</stdio>
  <command detect_errors="exit_code"><![CDATA[
    #from os import path as os_path
    cd /tmp &&
    #set outFolder = os_path.basename(str($rp2paths_pathways))
    mkdir '$outFolder' &&
    python -m rp2paths
      '$rp2_pathways'
      --outdir '$outFolder'
      --timeout '$adv.timeout' &&
    cp '$outFolder'/out_comp '$rp2paths_compounds' &&
    cp '$outFolder'/out_paths.csv '$rp2paths_pathways' &&
    rm -rf $outFolder
  ]]></command>
  <!-- python '$__tool_directory__/run.py' -_file_rp2_pathways '$rp2_pathways' -rp2paths_pathways '$rp2paths_pathways' -rp2paths_compounds '$rp2paths_compounds' -timeout '$adv.timeout' -->
  <inputs>
    <param name="rp2_pathways" type="data" format="csv" label="RetroPath2.0 Pathways" />
    <section name="adv" title="Advanced Options" expanded="false">
			<param name="timeout" type="integer" value="1800" label="Time Out" />
    </section>
  </inputs>
  <outputs>
    <data name="rp2paths_pathways" format="csv" label="${tool.name} Pathways" />
    <data name="rp2paths_compounds" format="tsv" label="${tool.name} Compounds" />
  </outputs>
  <help><![CDATA[
rp2paths
========


RP2paths extracts the set of pathways that lies in a metabolic space file output by the RetroPath2.0 workflow. Source code may be found at the following location: `GitHub <https://github.com/brsynth/rp2paths>`_.

Input
-----

Required information:


* **rp_results**\ : (string) Path to the ReatroPath2.0 pathways file

Advanced options:


* **timeout**\ : (string, default: 30 minutes) Time out time of the tool
* **server_url**\ : (string) IP address of the rp2paths REST service

Output
------


* **out_paths**\ : (string) Path to the RP2paths pathways. Describes all the indiviudal enumerated pathways that produce the compound of interest.
* **out_compounds**\ : (string) Path to the RP2paths Compounds. Describes the structure of all the chemical species involved in all pathways.

Versioning
----------

v0.1

Authors
-------


* **Melchior du Lac**
* Thomas Duigou
* Baudoin Delépine
* Pablo Carbonell

License
-------

`MIT <https://github.com/brsynth/rp2paths/blob/master/LICENSE.txt>`_

Acknowledgments
---------------


* Joan Hérisson

]]></help>
  <citations>
    <citation type="bibtex">
@article{delepine2018retropath2,
  title={RetroPath2.0: a retrosynthesis workflow for metabolic engineers},
  author={Del{\'e}pine, Baudoin and Duigou, Thomas and Carbonell, Pablo and Faulon, Jean-Loup},
  journal={Metabolic engineering},
  volume={45},
  pages={158--170},
  year={2018},
  publisher={Elsevier}}
    </citation>
  </citations>
</tool>
